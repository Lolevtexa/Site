<!DOCTYPE html>
<html lang="ru">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}.Lolevtexa{% endblock %}</title>
    <link rel="icon" href="{% static 'images/server_icon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script defer src="{% static 'js/nav.js' %}"></script>
</head>
<body>

<!-- Кнопка для открытия/закрытия главного меню (бургер) -->
<button class="menu-toggle" onclick="toggleMainNav()">☰</button>

<!-- Главная панель навигации -->
<nav id="main-nav" class="main-nav">
    <ul>
        {% for service in services_nav %}
            <li class="{% if service.active %}active{% endif %}">
                <a href="{{ service.url }}">{{ service.name }}</a>
            </li>
        {% endfor %}
    </ul>
</nav>

<!-- Локальная панель навигации -->
{% if local_nav %}
<nav class="sub-nav">
    <ul id="local-nav">
        {% for item in local_nav %}
            <li class="{% if request.path == item.url %}active{% endif %}">
                <a href="{{ item.url }}">{{ item.name }}</a>
            </li>
        {% endfor %}
        <li id="more-menu">
            <button onclick="toggleMoreMenu()">Ещё ▼</button>
            <ul id="more-dropdown" class="hidden"></ul>
        </li>
    </ul>
</nav>
{% endif %}

<!-- Меню пользователя (аватар) -->
<div class="user-menu">
    {% if user.is_authenticated %}
    <div class="avatar-container">
        <img src="{{ user.photo.url }}" alt="Аватар" class="avatar" onclick="toggleDropdown()">
        <div class="dropdown" id="userDropdown">
            <a href="{% url 'account:profile' %}">Профиль</a>
            <a href="{% url 'account:settings' %}">Настройки</a>
            <a href="{% url 'account:logout' %}">Выход</a>
        </div>
    </div>
    {% else %}
    <a href="{% url 'account:login' %}">Войти</a>
    {% endif %}
</div>

<!-- Основной контент -->
<main class="content">
    {% if user.is_authenticated and user.must_change_credentials %}
        <div class="alert alert-warning">
            <strong>Внимание!</strong> Вы используете временные данные. Пожалуйста, смените имя пользователя и пароль.
        </div>
    {% endif %}
    {% block content %}{% endblock %}
</main>

<!-- Подвал -->
<footer class="site-footer">
    <p>&copy; 2024. Все права защищены.</p>
</footer>

</body>
</html>
